# {{ stats.project_name or "dbt Project" }} — dbt Project Context

> Auto-generated by [ariadne](https://github.com/brunoribeirodasilva/ariadne).
> Re-run `ariadne sync` after `dbt compile` to keep this file up to date.

## Project Overview
- **Adapter**: {{ stats.adapter_type or "unknown" }}
- **Models**: {{ stats.model_count }} ({{ stats.staging_count }} staging, {{ stats.intermediate_count }} intermediate, {{ stats.marts_count }} marts{% if stats.other_count %}, {{ stats.other_count }} other{% endif %})
- **Sources**: {{ stats.source_count }} sources across {{ stats.source_schema_count }} source schemas
- **Tests**: {{ stats.test_count }} tests (~{{ stats.test_coverage_pct }}% column coverage)
- **Macros**: {{ stats.project_macro_count }} project macros

## Naming Conventions (auto-detected)
- **Staging**: `{{ patterns.naming.staging_pattern }}`{% if patterns.naming.staging_example %} (e.g., `{{ patterns.naming.staging_example }}`){% endif %}
- **Intermediate**: `{{ patterns.naming.intermediate_pattern }}`
- **Marts**: `{{ patterns.naming.marts_pattern }}`
- **Materialization**: staging={{ patterns.naming.staging_materialization }}, intermediate={{ patterns.naming.intermediate_materialization }}, marts={{ patterns.naming.marts_materialization }}
- **YAML schema files**: `{{ patterns.naming.yaml_pattern }}`

## Key Models (highest connectivity)
{% for model in key_models -%}
- **{{ model.name }}** ({{ model.layer }}): {{ model.description[:80] if model.description else "no description" }}{% if model.description and model.description|length > 80 %}...{% endif %} [{{ model.upstream_count }} upstream, {{ model.downstream_count }} downstream]
{% endfor %}

## Working with AI Agents
- **ALWAYS** call `get_context_capsule` before modifying any model
- **NEVER** guess column values — check existing tests or use `get_model_details`
- **BEFORE** completing a task, verify test coverage with `get_test_coverage`
- **BEFORE** refactoring, check blast radius with `get_impact_analysis`
- When creating new models, follow the naming and materialization conventions above
- Follow this project's test patterns: {{ patterns.naming.yaml_requirements }}

## MCP Server (ariadne)
Start: `ariadne serve`

Available tools:
- `get_context_capsule` — **primary tool**: one call returns pre-filtered, token-budgeted context for any task
- `search_models` — find models by name, description, or column content
- `get_lineage` — upstream/downstream DAG traversal to configurable depth
- `get_model_details` — full details for a specific model (SQL, columns, tests, lineage)
- `get_impact_analysis` — blast radius of changing a model
- `get_test_coverage` — test gaps and suggestions for a model
- `refresh_index` — re-index after `dbt compile`
